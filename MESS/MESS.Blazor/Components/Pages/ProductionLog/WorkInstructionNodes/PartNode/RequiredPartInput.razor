@using MESS.Data.Models

<div class="form-floating flex-grow-1">
    <InputText
        id="productionLogPart"
        class="form-control tall-input text-lightweight"
        placeholder="@ActiveProductionLogPart.SerializablePart?.PartDefinition?.Number"
        @bind-Value="@SerialNumber"
        @bind-Value:after="@(() => AfterSerialNumberInput.InvokeAsync(ActiveProductionLogPart))" />

    <label for="productionLogPart" class="form-label subtle-label">
        @ActiveProductionLogPart.SerializablePart?.PartDefinition?.Name
    </label>
</div>

@code {
    /// <summary>
    /// The active production log part.
    /// This parameter is required.
    /// </summary>
    [Parameter]
    public required ProductionLogPart ActiveProductionLogPart { get; set; }

    /// <summary>
    /// The callback to be invoked after the serial number input is updated.
    /// This parameter is required.
    /// </summary>
    [Parameter]
    public required EventCallback<ProductionLogPart> AfterSerialNumberInput { get; set; }
    
    private string SerialNumber
    {
        get => ActiveProductionLogPart.SerializablePart?.SerialNumber ?? string.Empty;
        set
        {
            if (ActiveProductionLogPart.SerializablePart is not null)
            {
                ActiveProductionLogPart.SerializablePart.SerialNumber = value;
            }
        }
    }
}