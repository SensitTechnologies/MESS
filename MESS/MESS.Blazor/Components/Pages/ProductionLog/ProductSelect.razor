@using MESS.Data.Models

<div>
    @if (Products != null && !IsEditMode)
    {
        <select @onchange="async e => await OnProductSelected.InvokeAsync(int.Parse(e.Value?.ToString() ?? string.Empty))">
            <option value="">Select Product</option>
            @foreach (var product in Products)
            {
                @if (product.WorkInstructions == null)
                {
                    continue;
                }
                <option value="@product.Id">@product.Name</option>
            }
        </select>
    }
</div>

@code {
    [Parameter]
    private List<Product>? Products { get; set; }
    [Parameter]
    private bool IsEditMode { get; set; }
    [Parameter]
    private EventCallback<int> OnProductSelected { get; set; }
}